# 分布式

## 结构
| 层级 | 定义 | 示例 | 说明 |
| :----: | ---- | ---- | ---- |
| 租户 | tenant | 腾讯 |  |
| 产品 | product | 微信 |  |
| 服务 | service | 信息发送服务 |  |
| 集群 | cluster | 机房1集群 |  |
| 服务进程(访问点) | end point | 机房1访问点A | IP+Port |

1. 后三者同[Kubernetes](kubernetes.html)
1. [docker](https://andrewwang79.gitbooks.io/ops/soft/sys/Docker.html)


## 方案
### 日志
1. Kafka等服务
1. docker官方方案：每个容器都有标准输出和错误，容器会自动收集
1. 七牛方案：指定目录，七牛自动收集

### 数据一致性
通过外部块存储解决。但相比硬盘还是太慢，所以不建议用外部存储来一致数据库。

# 微服务
## 介绍
### 3个改变
1. 部署单元 越来越小的粒度，加快交付效率，同时增加运维的复杂度。
1. 依赖方式从依赖库到依赖服务，增加了开发者选择的自由（语言，框架，库），提高了复用效率，同时增加了治理的复杂度。
1. 架构模式从单体应用到微服务架构，架构设计的关注点从分层转向了服务拆分。

### 成本
1. 组织架构
1. 运维
1. 服务治理

### 采用前提
1. 敏捷开发
1. 领域驱动设计(DDD)
1. 团队结构：一个模块一个团队独立做，如订单模块
1. 技术架构
1. **DevOps**
1. 管理工具，如调用链管理

## 实现
1. [Spring Cloud](SpringCloud.html)

## 资料
* [CAP定理](http://www.ruanyifeng.com/blog/2018/07/cap.html)
* [微服务实战（一）：微服务架构的优势与不足](http://dockone.io/article/394)
* [微服务架构设计的10个要点](http://developer.51cto.com/art/201807/579943.htm)
* [微服务实施失败总结：7大步骤高效推进微服务架构演进](http://developer.51cto.com/art/201708/549876.htm)
